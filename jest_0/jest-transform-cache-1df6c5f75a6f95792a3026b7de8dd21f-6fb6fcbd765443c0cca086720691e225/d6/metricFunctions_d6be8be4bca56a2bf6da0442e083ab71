cf206c56ec46e01c929326f8ff5dd739
'use strict';Object.defineProperty(exports, "__esModule", { value: true });var _createClass = function () {function defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}return function (Constructor, protoProps, staticProps) {if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;};}();exports.










































































































































































































































































































































































createFuncInstance = createFuncInstance;exports.









getFuncDef = getFuncDef;exports.



getCategories = getCategories;var _lodash = require('lodash');var _lodash2 = _interopRequireDefault(_lodash);var _jquery = require('jquery');var _jquery2 = _interopRequireDefault(_jquery);function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}var index = [];var categories = { Transform: [], Aggregate: [], Filter: [], Trends: [], Time: [], Alias: [], Special: [] };function addFuncDef(funcDef) {funcDef.params = funcDef.params || [];funcDef.defaultParams = funcDef.defaultParams || [];if (funcDef.category) {categories[funcDef.category].push(funcDef);}index[funcDef.name] = funcDef;index[funcDef.shortName || funcDef.name] = funcDef;} // Transform
addFuncDef({ name: 'groupBy', category: 'Transform', params: [{ name: 'interval', type: 'string' }, { name: 'function', type: 'string', options: ['avg', 'min', 'max', 'sum', 'count', 'median'] }], defaultParams: ['1m', 'avg'] });addFuncDef({ name: 'scale', category: 'Transform', params: [{ name: 'factor', type: 'float', options: [100, 0.01, 10, -1] }], defaultParams: [100] });addFuncDef({ name: 'delta', category: 'Transform', params: [], defaultParams: [] });addFuncDef({ name: 'rate', category: 'Transform', params: [], defaultParams: [] });addFuncDef({ name: 'movingAverage', category: 'Transform', params: [{ name: 'factor', type: 'int', options: [6, 10, 60, 100, 600] }], defaultParams: [10] });addFuncDef({ name: 'exponentialMovingAverage', category: 'Transform', params: [{ name: 'smoothing', type: 'float', options: [6, 10, 60, 100, 600] }], defaultParams: [0.2] }); // Aggregate
addFuncDef({ name: 'sumSeries', category: 'Aggregate', params: [], defaultParams: [] });addFuncDef({ name: 'median', category: 'Aggregate', params: [{ name: 'interval', type: 'string' }], defaultParams: ['1m'] });addFuncDef({ name: 'average', category: 'Aggregate', params: [{ name: 'interval', type: 'string' }], defaultParams: ['1m'] });addFuncDef({ name: 'percentil', category: 'Aggregate', params: [{ name: 'interval', type: 'string' }, { name: 'percent', type: 'float', options: [25, 50, 75, 90, 95, 99, 99.9] }], defaultParams: ['1m', 95] });addFuncDef({ name: 'min', category: 'Aggregate', params: [{ name: 'interval', type: 'string' }], defaultParams: ['1m'] });addFuncDef({ name: 'max', category: 'Aggregate', params: [{ name: 'interval', type: 'string' }], defaultParams: ['1m'] });addFuncDef({ name: 'sum', category: 'Aggregate', params: [{ name: 'interval', type: 'string' }], defaultParams: ['1m'] });addFuncDef({ name: 'count', category: 'Aggregate', params: [{ name: 'interval', type: 'string' }], defaultParams: ['1m'] });addFuncDef({ name: 'aggregateBy', category: 'Aggregate', params: [{ name: 'interval', type: 'string' }, { name: 'function', type: 'string', options: ['avg', 'min', 'max', 'sum', 'count', 'median'] }], defaultParams: ['1m', 'avg'] }); // Filter
addFuncDef({ name: 'top', category: 'Filter', params: [{ name: 'number', type: 'int' }, { name: 'value', type: 'string', options: ['avg', 'min', 'max', 'sum', 'count', 'median'] }], defaultParams: [5, 'avg'] });addFuncDef({ name: 'bottom', category: 'Filter', params: [{ name: 'number', type: 'int' }, { name: 'value', type: 'string', options: ['avg', 'min', 'max', 'sum', 'count', 'median'] }], defaultParams: [5, 'avg'] });addFuncDef({ name: 'sortSeries', category: 'Filter', params: [{ name: 'direction', type: 'string', options: ['asc', 'desc'] }], defaultParams: ['asc'] }); // Trends
addFuncDef({ name: 'trendValue', category: 'Trends', params: [{ name: 'type', type: 'string', options: ['avg', 'min', 'max', 'sum', 'count'] }], defaultParams: ['avg'] }); // Time
addFuncDef({ name: 'timeShift', category: 'Time', params: [{ name: 'interval', type: 'string', options: ['24h', '7d', '1M', '+24h', '-24h'] }], defaultParams: ['24h'] }); //Alias
addFuncDef({ name: 'setAlias', category: 'Alias', params: [{ name: 'alias', type: 'string' }], defaultParams: [] });addFuncDef({ name: 'setAliasByRegex', category: 'Alias', params: [{ name: 'aliasByRegex', type: 'string' }], defaultParams: [] });addFuncDef({ name: 'replaceAlias', category: 'Alias', params: [{ name: 'regexp', type: 'string' }, { name: 'newAlias', type: 'string' }], defaultParams: ['/(.*)/', '$1'] }); // Special
addFuncDef({ name: 'consolidateBy', category: 'Special', params: [{ name: 'type', type: 'string', options: ['avg', 'min', 'max', 'sum', 'count'] }], defaultParams: ['avg'] });_lodash2.default.each(categories, function (funcList, catName) {categories[catName] = _lodash2.default.sortBy(funcList, 'name');});var FuncInstance = function () {function FuncInstance(funcDef, params) {_classCallCheck(this, FuncInstance);this.def = funcDef;if (params) {this.params = params;} else {// Create with default params
      this.params = [];this.params = funcDef.defaultParams.slice(0);}this.updateText();}_createClass(FuncInstance, [{ key: 'bindFunction', value: function bindFunction(metricFunctions) {var func = metricFunctions[this.def.name];if (func) {// Bind function arguments
        var bindedFunc = func;var param;for (var i = 0; i < this.params.length; i++) {param = this.params[i]; // Convert numeric params
          if (this.def.params[i].type === 'int' || this.def.params[i].type === 'float') {param = Number(param);}bindedFunc = _lodash2.default.partial(bindedFunc, param);}return bindedFunc;} else {throw { message: 'Method not found ' + this.def.name };}} }, { key: 'render', value: function render(metricExp) {var str = this.def.name + '(';var parameters = _lodash2.default.map(this.params, function (value, index) {var paramType = this.def.params[index].type;if (paramType === 'int' || paramType === 'float' || paramType === 'value_or_series' || paramType === 'boolean') {return value;} else if (paramType === 'int_or_interval' && _jquery2.default.isNumeric(value)) {return value;}return "'" + value + "'";}, this);if (metricExp) {parameters.unshift(metricExp);}return str + parameters.join(', ') + ')';} }, { key: '_hasMultipleParamsInString', value: function _hasMultipleParamsInString(strValue, index) {if (strValue.indexOf(',') === -1) {return false;}return this.def.params[index + 1] && this.def.params[index + 1].optional;} }, { key: 'updateParam', value: function updateParam(strValue, index) {// handle optional parameters
      // if string contains ',' and next param is optional, split and update both
      if (this._hasMultipleParamsInString(strValue, index)) {_lodash2.default.each(strValue.split(','), function (partVal, idx) {this.updateParam(partVal.trim(), idx);}, this);return;}if (strValue === '' && this.def.params[index].optional) {this.params.splice(index, 1);} else {this.params[index] = strValue;}this.updateText();} }, { key: 'updateText', value: function updateText() {if (this.params.length === 0) {this.text = this.def.name + '()';return;}var text = this.def.name + '(';text += this.params.join(', ');text += ')';this.text = text;} }]);return FuncInstance;}();function createFuncInstance(funcDef, params) {if (_lodash2.default.isString(funcDef)) {if (!index[funcDef]) {throw { message: 'Method not found ' + name };}funcDef = index[funcDef];}return new FuncInstance(funcDef, params);}function getFuncDef(name) {return index[name];}function getCategories() {return categories;}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1ldHJpY0Z1bmN0aW9ucy5qcyJdLCJuYW1lcyI6WyJjcmVhdGVGdW5jSW5zdGFuY2UiLCJnZXRGdW5jRGVmIiwiZ2V0Q2F0ZWdvcmllcyIsImluZGV4IiwiY2F0ZWdvcmllcyIsIlRyYW5zZm9ybSIsIkFnZ3JlZ2F0ZSIsIkZpbHRlciIsIlRyZW5kcyIsIlRpbWUiLCJBbGlhcyIsIlNwZWNpYWwiLCJhZGRGdW5jRGVmIiwiZnVuY0RlZiIsInBhcmFtcyIsImRlZmF1bHRQYXJhbXMiLCJjYXRlZ29yeSIsInB1c2giLCJuYW1lIiwic2hvcnROYW1lIiwidHlwZSIsIm9wdGlvbnMiLCJfIiwiZWFjaCIsImZ1bmNMaXN0IiwiY2F0TmFtZSIsInNvcnRCeSIsIkZ1bmNJbnN0YW5jZSIsImRlZiIsInNsaWNlIiwidXBkYXRlVGV4dCIsIm1ldHJpY0Z1bmN0aW9ucyIsImZ1bmMiLCJiaW5kZWRGdW5jIiwicGFyYW0iLCJpIiwibGVuZ3RoIiwiTnVtYmVyIiwicGFydGlhbCIsIm1lc3NhZ2UiLCJtZXRyaWNFeHAiLCJzdHIiLCJwYXJhbWV0ZXJzIiwibWFwIiwidmFsdWUiLCJwYXJhbVR5cGUiLCIkIiwiaXNOdW1lcmljIiwidW5zaGlmdCIsImpvaW4iLCJzdHJWYWx1ZSIsImluZGV4T2YiLCJvcHRpb25hbCIsIl9oYXNNdWx0aXBsZVBhcmFtc0luU3RyaW5nIiwic3BsaXQiLCJwYXJ0VmFsIiwiaWR4IiwidXBkYXRlUGFyYW0iLCJ0cmltIiwic3BsaWNlIiwidGV4dCIsImlzU3RyaW5nIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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QyxNQUFMLENBQVk2QyxNQUFaLENBQW1CeEQsS0FBbkIsRUFBMEIsQ0FBMUIsRUFDRCxDQUZELE1BR0ssQ0FDSCxLQUFLVyxNQUFMLENBQVlYLEtBQVosSUFBcUIrQyxRQUFyQixDQUNELENBRUQsS0FBS3BCLFVBQUwsR0FDRCxDLHNEQUVZLENBQ1gsSUFBSSxLQUFLaEIsTUFBTCxDQUFZc0IsTUFBWixLQUF1QixDQUEzQixFQUE4QixDQUM1QixLQUFLd0IsSUFBTCxHQUFZLEtBQUtoQyxHQUFMLENBQVNWLElBQVQsR0FBZ0IsSUFBNUIsQ0FDQSxPQUNELENBRUQsSUFBSTBDLE9BQU8sS0FBS2hDLEdBQUwsQ0FBU1YsSUFBVCxHQUFnQixHQUEzQixDQUNBMEMsUUFBUSxLQUFLOUMsTUFBTCxDQUFZbUMsSUFBWixDQUFpQixJQUFqQixDQUFSLENBQ0FXLFFBQVEsR0FBUixDQUNBLEtBQUtBLElBQUwsR0FBWUEsSUFBWixDQUNELEMsNkJBR0ksU0FBUzVELGtCQUFULENBQTRCYSxPQUE1QixFQUFxQ0MsTUFBckMsRUFBNkMsQ0FDbEQsSUFBSVEsaUJBQUV1QyxRQUFGLENBQVdoRCxPQUFYLENBQUosRUFBeUIsQ0FDdkIsSUFBSSxDQUFDVixNQUFNVSxPQUFOLENBQUwsRUFBcUIsQ0FDbkIsTUFBTSxFQUFFMEIsU0FBUyxzQkFBc0JyQixJQUFqQyxFQUFOLENBQ0QsQ0FDREwsVUFBVVYsTUFBTVUsT0FBTixDQUFWLENBQ0QsQ0FDRCxPQUFPLElBQUljLFlBQUosQ0FBaUJkLE9BQWpCLEVBQTBCQyxNQUExQixDQUFQLENBQ0QsQ0FFTSxTQUFTYixVQUFULENBQW9CaUIsSUFBcEIsRUFBMEIsQ0FDL0IsT0FBT2YsTUFBTWUsSUFBTixDQUFQLENBQ0QsQ0FFTSxTQUFTaEIsYUFBVCxHQUF5QixDQUM5QixPQUFPRSxVQUFQLENBQ0QiLCJmaWxlIjoibWV0cmljRnVuY3Rpb25zLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCAkIGZyb20gJ2pxdWVyeSc7XG5cbnZhciBpbmRleCA9IFtdO1xudmFyIGNhdGVnb3JpZXMgPSB7XG4gIFRyYW5zZm9ybTogW10sXG4gIEFnZ3JlZ2F0ZTogW10sXG4gIEZpbHRlcjogW10sXG4gIFRyZW5kczogW10sXG4gIFRpbWU6IFtdLFxuICBBbGlhczogW10sXG4gIFNwZWNpYWw6IFtdXG59O1xuXG5mdW5jdGlvbiBhZGRGdW5jRGVmKGZ1bmNEZWYpIHtcbiAgZnVuY0RlZi5wYXJhbXMgPSBmdW5jRGVmLnBhcmFtcyB8fCBbXTtcbiAgZnVuY0RlZi5kZWZhdWx0UGFyYW1zID0gZnVuY0RlZi5kZWZhdWx0UGFyYW1zIHx8IFtdO1xuXG4gIGlmIChmdW5jRGVmLmNhdGVnb3J5KSB7XG4gICAgY2F0ZWdvcmllc1tmdW5jRGVmLmNhdGVnb3J5XS5wdXNoKGZ1bmNEZWYpO1xuICB9XG4gIGluZGV4W2Z1bmNEZWYubmFtZV0gPSBmdW5jRGVmO1xuICBpbmRleFtmdW5jRGVmLnNob3J0TmFtZSB8fCBmdW5jRGVmLm5hbWVdID0gZnVuY0RlZjtcbn1cblxuLy8gVHJhbnNmb3JtXG5cbmFkZEZ1bmNEZWYoe1xuICBuYW1lOiAnZ3JvdXBCeScsXG4gIGNhdGVnb3J5OiAnVHJhbnNmb3JtJyxcbiAgcGFyYW1zOiBbXG4gICAgeyBuYW1lOiAnaW50ZXJ2YWwnLCB0eXBlOiAnc3RyaW5nJ30sXG4gICAgeyBuYW1lOiAnZnVuY3Rpb24nLCB0eXBlOiAnc3RyaW5nJywgb3B0aW9uczogWydhdmcnLCAnbWluJywgJ21heCcsICdzdW0nLCAnY291bnQnLCAnbWVkaWFuJ10gfVxuICBdLFxuICBkZWZhdWx0UGFyYW1zOiBbJzFtJywgJ2F2ZyddLFxufSk7XG5cbmFkZEZ1bmNEZWYoe1xuICBuYW1lOiAnc2NhbGUnLFxuICBjYXRlZ29yeTogJ1RyYW5zZm9ybScsXG4gIHBhcmFtczogW1xuICAgIHsgbmFtZTogJ2ZhY3RvcicsIHR5cGU6ICdmbG9hdCcsIG9wdGlvbnM6IFsxMDAsIDAuMDEsIDEwLCAtMV19XG4gIF0sXG4gIGRlZmF1bHRQYXJhbXM6IFsxMDBdLFxufSk7XG5cbmFkZEZ1bmNEZWYoe1xuICBuYW1lOiAnZGVsdGEnLFxuICBjYXRlZ29yeTogJ1RyYW5zZm9ybScsXG4gIHBhcmFtczogW10sXG4gIGRlZmF1bHRQYXJhbXM6IFtdLFxufSk7XG5cbmFkZEZ1bmNEZWYoe1xuICBuYW1lOiAncmF0ZScsXG4gIGNhdGVnb3J5OiAnVHJhbnNmb3JtJyxcbiAgcGFyYW1zOiBbXSxcbiAgZGVmYXVsdFBhcmFtczogW10sXG59KTtcblxuYWRkRnVuY0RlZih7XG4gIG5hbWU6ICdtb3ZpbmdBdmVyYWdlJyxcbiAgY2F0ZWdvcnk6ICdUcmFuc2Zvcm0nLFxuICBwYXJhbXM6IFtcbiAgICB7IG5hbWU6ICdmYWN0b3InLCB0eXBlOiAnaW50Jywgb3B0aW9uczogWzYsIDEwLCA2MCwgMTAwLCA2MDBdIH1cbiAgXSxcbiAgZGVmYXVsdFBhcmFtczogWzEwXSxcbn0pO1xuXG5hZGRGdW5jRGVmKHtcbiAgbmFtZTogJ2V4cG9uZW50aWFsTW92aW5nQXZlcmFnZScsXG4gIGNhdGVnb3J5OiAnVHJhbnNmb3JtJyxcbiAgcGFyYW1zOiBbXG4gICAgeyBuYW1lOiAnc21vb3RoaW5nJywgdHlwZTogJ2Zsb2F0Jywgb3B0aW9uczogWzYsIDEwLCA2MCwgMTAwLCA2MDBdIH1cbiAgXSxcbiAgZGVmYXVsdFBhcmFtczogWzAuMl0sXG59KTtcblxuLy8gQWdncmVnYXRlXG5cbmFkZEZ1bmNEZWYoe1xuICBuYW1lOiAnc3VtU2VyaWVzJyxcbiAgY2F0ZWdvcnk6ICdBZ2dyZWdhdGUnLFxuICBwYXJhbXM6IFtdLFxuICBkZWZhdWx0UGFyYW1zOiBbXSxcbn0pO1xuXG5hZGRGdW5jRGVmKHtcbiAgbmFtZTogJ21lZGlhbicsXG4gIGNhdGVnb3J5OiAnQWdncmVnYXRlJyxcbiAgcGFyYW1zOiBbXG4gICAgeyBuYW1lOiAnaW50ZXJ2YWwnLCB0eXBlOiAnc3RyaW5nJ31cbiAgXSxcbiAgZGVmYXVsdFBhcmFtczogWycxbSddLFxufSk7XG5cbmFkZEZ1bmNEZWYoe1xuICBuYW1lOiAnYXZlcmFnZScsXG4gIGNhdGVnb3J5OiAnQWdncmVnYXRlJyxcbiAgcGFyYW1zOiBbXG4gICAgeyBuYW1lOiAnaW50ZXJ2YWwnLCB0eXBlOiAnc3RyaW5nJyB9XG4gIF0sXG4gIGRlZmF1bHRQYXJhbXM6IFsnMW0nXSxcbn0pO1xuXG5hZGRGdW5jRGVmKHtcbiAgbmFtZTogJ3BlcmNlbnRpbCcsXG4gIGNhdGVnb3J5OiAnQWdncmVnYXRlJyxcbiAgcGFyYW1zOiBbXG4gICAgeyBuYW1lOiAnaW50ZXJ2YWwnLCB0eXBlOiAnc3RyaW5nJyB9LFxuICAgIHsgbmFtZTogJ3BlcmNlbnQnLCB0eXBlOiAnZmxvYXQnLCBvcHRpb25zOiBbMjUsIDUwLCA3NSwgOTAsIDk1LCA5OSwgOTkuOV0gfVxuICBdLFxuICBkZWZhdWx0UGFyYW1zOiBbJzFtJywgOTVdLFxufSk7XG5cbmFkZEZ1bmNEZWYoe1xuICBuYW1lOiAnbWluJyxcbiAgY2F0ZWdvcnk6ICdBZ2dyZWdhdGUnLFxuICBwYXJhbXM6IFtcbiAgICB7IG5hbWU6ICdpbnRlcnZhbCcsIHR5cGU6ICdzdHJpbmcnIH1cbiAgXSxcbiAgZGVmYXVsdFBhcmFtczogWycxbSddLFxufSk7XG5cbmFkZEZ1bmNEZWYoe1xuICBuYW1lOiAnbWF4JyxcbiAgY2F0ZWdvcnk6ICdBZ2dyZWdhdGUnLFxuICBwYXJhbXM6IFtcbiAgICB7IG5hbWU6ICdpbnRlcnZhbCcsIHR5cGU6ICdzdHJpbmcnIH1cbiAgXSxcbiAgZGVmYXVsdFBhcmFtczogWycxbSddLFxufSk7XG5cbmFkZEZ1bmNEZWYoe1xuICBuYW1lOiAnc3VtJyxcbiAgY2F0ZWdvcnk6ICdBZ2dyZWdhdGUnLFxuICBwYXJhbXM6IFtcbiAgICB7IG5hbWU6ICdpbnRlcnZhbCcsIHR5cGU6ICdzdHJpbmcnIH1cbiAgXSxcbiAgZGVmYXVsdFBhcmFtczogWycxbSddLFxufSk7XG5cbmFkZEZ1bmNEZWYoe1xuICBuYW1lOiAnY291bnQnLFxuICBjYXRlZ29yeTogJ0FnZ3JlZ2F0ZScsXG4gIHBhcmFtczogW1xuICAgIHsgbmFtZTogJ2ludGVydmFsJywgdHlwZTogJ3N0cmluZycgfVxuICBdLFxuICBkZWZhdWx0UGFyYW1zOiBbJzFtJ10sXG59KTtcblxuYWRkRnVuY0RlZih7XG4gIG5hbWU6ICdhZ2dyZWdhdGVCeScsXG4gIGNhdGVnb3J5OiAnQWdncmVnYXRlJyxcbiAgcGFyYW1zOiBbXG4gICAgeyBuYW1lOiAnaW50ZXJ2YWwnLCB0eXBlOiAnc3RyaW5nJyB9LFxuICAgIHsgbmFtZTogJ2Z1bmN0aW9uJywgdHlwZTogJ3N0cmluZycsIG9wdGlvbnM6IFsnYXZnJywgJ21pbicsICdtYXgnLCAnc3VtJywgJ2NvdW50JywgJ21lZGlhbiddIH1cbiAgXSxcbiAgZGVmYXVsdFBhcmFtczogWycxbScsICdhdmcnXSxcbn0pO1xuXG4vLyBGaWx0ZXJcblxuYWRkRnVuY0RlZih7XG4gIG5hbWU6ICd0b3AnLFxuICBjYXRlZ29yeTogJ0ZpbHRlcicsXG4gIHBhcmFtczogW1xuICAgIHsgbmFtZTogJ251bWJlcicsIHR5cGU6ICdpbnQnIH0sXG4gICAgeyBuYW1lOiAndmFsdWUnLCB0eXBlOiAnc3RyaW5nJywgb3B0aW9uczogWydhdmcnLCAnbWluJywgJ21heCcsICdzdW0nLCAnY291bnQnLCAnbWVkaWFuJ10gfVxuICBdLFxuICBkZWZhdWx0UGFyYW1zOiBbNSwgJ2F2ZyddLFxufSk7XG5cbmFkZEZ1bmNEZWYoe1xuICBuYW1lOiAnYm90dG9tJyxcbiAgY2F0ZWdvcnk6ICdGaWx0ZXInLFxuICBwYXJhbXM6IFtcbiAgICB7IG5hbWU6ICdudW1iZXInLCB0eXBlOiAnaW50JyB9LFxuICAgIHsgbmFtZTogJ3ZhbHVlJywgdHlwZTogJ3N0cmluZycsIG9wdGlvbnM6IFsnYXZnJywgJ21pbicsICdtYXgnLCAnc3VtJywgJ2NvdW50JywgJ21lZGlhbiddIH1cbiAgXSxcbiAgZGVmYXVsdFBhcmFtczogWzUsICdhdmcnXSxcbn0pO1xuXG5hZGRGdW5jRGVmKHtcbiAgbmFtZTogJ3NvcnRTZXJpZXMnLFxuICBjYXRlZ29yeTogJ0ZpbHRlcicsXG4gIHBhcmFtczogW1xuICAgIHsgbmFtZTogJ2RpcmVjdGlvbicsIHR5cGU6ICdzdHJpbmcnLCBvcHRpb25zOiBbJ2FzYycsICdkZXNjJ10gfVxuICBdLFxuICBkZWZhdWx0UGFyYW1zOiBbJ2FzYyddXG59KTtcblxuLy8gVHJlbmRzXG5cbmFkZEZ1bmNEZWYoe1xuICBuYW1lOiAndHJlbmRWYWx1ZScsXG4gIGNhdGVnb3J5OiAnVHJlbmRzJyxcbiAgcGFyYW1zOiBbXG4gICAgeyBuYW1lOiAndHlwZScsIHR5cGU6ICdzdHJpbmcnLCBvcHRpb25zOiBbJ2F2ZycsICdtaW4nLCAnbWF4JywgJ3N1bScsICdjb3VudCddIH1cbiAgXSxcbiAgZGVmYXVsdFBhcmFtczogWydhdmcnXSxcbn0pO1xuXG4vLyBUaW1lXG5cbmFkZEZ1bmNEZWYoe1xuICBuYW1lOiAndGltZVNoaWZ0JyxcbiAgY2F0ZWdvcnk6ICdUaW1lJyxcbiAgcGFyYW1zOiBbXG4gICAgeyBuYW1lOiAnaW50ZXJ2YWwnLCB0eXBlOiAnc3RyaW5nJywgb3B0aW9uczogWycyNGgnLCAnN2QnLCAnMU0nLCAnKzI0aCcsICctMjRoJ119XG4gIF0sXG4gIGRlZmF1bHRQYXJhbXM6IFsnMjRoJ10sXG59KTtcblxuLy9BbGlhc1xuXG5hZGRGdW5jRGVmKHtcbiAgbmFtZTogJ3NldEFsaWFzJyxcbiAgY2F0ZWdvcnk6ICdBbGlhcycsXG4gIHBhcmFtczogW1xuICAgIHsgbmFtZTogJ2FsaWFzJywgdHlwZTogJ3N0cmluZycgfVxuICBdLFxuICBkZWZhdWx0UGFyYW1zOiBbXVxufSk7XG5cbmFkZEZ1bmNEZWYoe1xuICBuYW1lOiAnc2V0QWxpYXNCeVJlZ2V4JyxcbiAgY2F0ZWdvcnk6ICdBbGlhcycsXG4gIHBhcmFtczogW1xuICAgIHsgbmFtZTogJ2FsaWFzQnlSZWdleCcsIHR5cGU6ICdzdHJpbmcnIH1cbiAgXSxcbiAgZGVmYXVsdFBhcmFtczogW11cbn0pO1xuXG5hZGRGdW5jRGVmKHtcbiAgbmFtZTogJ3JlcGxhY2VBbGlhcycsXG4gIGNhdGVnb3J5OiAnQWxpYXMnLFxuICBwYXJhbXM6IFtcbiAgICB7IG5hbWU6ICdyZWdleHAnLCB0eXBlOiAnc3RyaW5nJyB9LFxuICAgIHsgbmFtZTogJ25ld0FsaWFzJywgdHlwZTogJ3N0cmluZycgfVxuICBdLFxuICBkZWZhdWx0UGFyYW1zOiBbJy8oLiopLycsICckMSddXG59KTtcblxuLy8gU3BlY2lhbFxuYWRkRnVuY0RlZih7XG4gIG5hbWU6ICdjb25zb2xpZGF0ZUJ5JyxcbiAgY2F0ZWdvcnk6ICdTcGVjaWFsJyxcbiAgcGFyYW1zOiBbXG4gICAgeyBuYW1lOiAndHlwZScsIHR5cGU6ICdzdHJpbmcnLCBvcHRpb25zOiBbJ2F2ZycsICdtaW4nLCAnbWF4JywgJ3N1bScsICdjb3VudCddIH1cbiAgXSxcbiAgZGVmYXVsdFBhcmFtczogWydhdmcnXSxcbn0pO1xuXG5fLmVhY2goY2F0ZWdvcmllcywgZnVuY3Rpb24oZnVuY0xpc3QsIGNhdE5hbWUpIHtcbiAgY2F0ZWdvcmllc1tjYXROYW1lXSA9IF8uc29ydEJ5KGZ1bmNMaXN0LCAnbmFtZScpO1xufSk7XG5cbmNsYXNzIEZ1bmNJbnN0YW5jZSB7XG4gIGNvbnN0cnVjdG9yKGZ1bmNEZWYsIHBhcmFtcykge1xuICAgIHRoaXMuZGVmID0gZnVuY0RlZjtcblxuICAgIGlmIChwYXJhbXMpIHtcbiAgICAgIHRoaXMucGFyYW1zID0gcGFyYW1zO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBDcmVhdGUgd2l0aCBkZWZhdWx0IHBhcmFtc1xuICAgICAgdGhpcy5wYXJhbXMgPSBbXTtcbiAgICAgIHRoaXMucGFyYW1zID0gZnVuY0RlZi5kZWZhdWx0UGFyYW1zLnNsaWNlKDApO1xuICAgIH1cblxuICAgIHRoaXMudXBkYXRlVGV4dCgpO1xuICB9XG5cbiAgYmluZEZ1bmN0aW9uKG1ldHJpY0Z1bmN0aW9ucykge1xuICAgIHZhciBmdW5jID0gbWV0cmljRnVuY3Rpb25zW3RoaXMuZGVmLm5hbWVdO1xuICAgIGlmIChmdW5jKSB7XG5cbiAgICAgIC8vIEJpbmQgZnVuY3Rpb24gYXJndW1lbnRzXG4gICAgICB2YXIgYmluZGVkRnVuYyA9IGZ1bmM7XG4gICAgICB2YXIgcGFyYW07XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucGFyYW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHBhcmFtID0gdGhpcy5wYXJhbXNbaV07XG5cbiAgICAgICAgLy8gQ29udmVydCBudW1lcmljIHBhcmFtc1xuICAgICAgICBpZiAodGhpcy5kZWYucGFyYW1zW2ldLnR5cGUgPT09ICdpbnQnIHx8XG4gICAgICAgICAgICB0aGlzLmRlZi5wYXJhbXNbaV0udHlwZSA9PT0gJ2Zsb2F0Jykge1xuICAgICAgICAgIHBhcmFtID0gTnVtYmVyKHBhcmFtKTtcbiAgICAgICAgfVxuICAgICAgICBiaW5kZWRGdW5jID0gXy5wYXJ0aWFsKGJpbmRlZEZ1bmMsIHBhcmFtKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBiaW5kZWRGdW5jO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyB7IG1lc3NhZ2U6ICdNZXRob2Qgbm90IGZvdW5kICcgKyB0aGlzLmRlZi5uYW1lIH07XG4gICAgfVxuICB9XG5cbiAgcmVuZGVyKG1ldHJpY0V4cCkge1xuICAgIHZhciBzdHIgPSB0aGlzLmRlZi5uYW1lICsgJygnO1xuICAgIHZhciBwYXJhbWV0ZXJzID0gXy5tYXAodGhpcy5wYXJhbXMsIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCkge1xuXG4gICAgICB2YXIgcGFyYW1UeXBlID0gdGhpcy5kZWYucGFyYW1zW2luZGV4XS50eXBlO1xuICAgICAgaWYgKHBhcmFtVHlwZSA9PT0gJ2ludCcgfHxcbiAgICAgICAgICBwYXJhbVR5cGUgPT09ICdmbG9hdCcgfHxcbiAgICAgICAgICBwYXJhbVR5cGUgPT09ICd2YWx1ZV9vcl9zZXJpZXMnIHx8XG4gICAgICAgICAgcGFyYW1UeXBlID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAocGFyYW1UeXBlID09PSAnaW50X29yX2ludGVydmFsJyAmJiAkLmlzTnVtZXJpYyh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gXCInXCIgKyB2YWx1ZSArIFwiJ1wiO1xuXG4gICAgfSwgdGhpcyk7XG5cbiAgICBpZiAobWV0cmljRXhwKSB7XG4gICAgICBwYXJhbWV0ZXJzLnVuc2hpZnQobWV0cmljRXhwKTtcbiAgICB9XG5cbiAgICByZXR1cm4gc3RyICsgcGFyYW1ldGVycy5qb2luKCcsICcpICsgJyknO1xuICB9XG5cbiAgX2hhc011bHRpcGxlUGFyYW1zSW5TdHJpbmcoc3RyVmFsdWUsIGluZGV4KSB7XG4gICAgaWYgKHN0clZhbHVlLmluZGV4T2YoJywnKSA9PT0gLTEpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5kZWYucGFyYW1zW2luZGV4ICsgMV0gJiYgdGhpcy5kZWYucGFyYW1zW2luZGV4ICsgMV0ub3B0aW9uYWw7XG4gIH1cblxuICB1cGRhdGVQYXJhbShzdHJWYWx1ZSwgaW5kZXgpIHtcbiAgICAvLyBoYW5kbGUgb3B0aW9uYWwgcGFyYW1ldGVyc1xuICAgIC8vIGlmIHN0cmluZyBjb250YWlucyAnLCcgYW5kIG5leHQgcGFyYW0gaXMgb3B0aW9uYWwsIHNwbGl0IGFuZCB1cGRhdGUgYm90aFxuICAgIGlmICh0aGlzLl9oYXNNdWx0aXBsZVBhcmFtc0luU3RyaW5nKHN0clZhbHVlLCBpbmRleCkpIHtcbiAgICAgIF8uZWFjaChzdHJWYWx1ZS5zcGxpdCgnLCcpLCBmdW5jdGlvbihwYXJ0VmFsLCBpZHgpIHtcbiAgICAgICAgdGhpcy51cGRhdGVQYXJhbShwYXJ0VmFsLnRyaW0oKSwgaWR4KTtcbiAgICAgIH0sIHRoaXMpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChzdHJWYWx1ZSA9PT0gJycgJiYgdGhpcy5kZWYucGFyYW1zW2luZGV4XS5vcHRpb25hbCkge1xuICAgICAgdGhpcy5wYXJhbXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICB0aGlzLnBhcmFtc1tpbmRleF0gPSBzdHJWYWx1ZTtcbiAgICB9XG5cbiAgICB0aGlzLnVwZGF0ZVRleHQoKTtcbiAgfVxuXG4gIHVwZGF0ZVRleHQoKSB7XG4gICAgaWYgKHRoaXMucGFyYW1zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhpcy50ZXh0ID0gdGhpcy5kZWYubmFtZSArICcoKSc7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIHRleHQgPSB0aGlzLmRlZi5uYW1lICsgJygnO1xuICAgIHRleHQgKz0gdGhpcy5wYXJhbXMuam9pbignLCAnKTtcbiAgICB0ZXh0ICs9ICcpJztcbiAgICB0aGlzLnRleHQgPSB0ZXh0O1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVGdW5jSW5zdGFuY2UoZnVuY0RlZiwgcGFyYW1zKSB7XG4gIGlmIChfLmlzU3RyaW5nKGZ1bmNEZWYpKSB7XG4gICAgaWYgKCFpbmRleFtmdW5jRGVmXSkge1xuICAgICAgdGhyb3cgeyBtZXNzYWdlOiAnTWV0aG9kIG5vdCBmb3VuZCAnICsgbmFtZSB9O1xuICAgIH1cbiAgICBmdW5jRGVmID0gaW5kZXhbZnVuY0RlZl07XG4gIH1cbiAgcmV0dXJuIG5ldyBGdW5jSW5zdGFuY2UoZnVuY0RlZiwgcGFyYW1zKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEZ1bmNEZWYobmFtZSkge1xuICByZXR1cm4gaW5kZXhbbmFtZV07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRDYXRlZ29yaWVzKCkge1xuICByZXR1cm4gY2F0ZWdvcmllcztcbn1cbiJdfQ==