d3421f54366afcdbe59337db891955f5
'use strict';Object.defineProperty(exports, "__esModule", { value: true });var _createClass = function () {function defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}return function (Constructor, protoProps, staticProps) {if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;};}();exports.



































































































triggerPanelTriggersTab = triggerPanelTriggersTab;var _lodash = require('lodash');var _lodash2 = _interopRequireDefault(_lodash);var _utils = require('../datasource-zabbix/utils');var utils = _interopRequireWildcard(_utils);var _triggers_panel_ctrl = require('./triggers_panel_ctrl');function _interopRequireWildcard(obj) {if (obj && obj.__esModule) {return obj;} else {var newObj = {};if (obj != null) {for (var key in obj) {if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];}}newObj.default = obj;return newObj;}}function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}var TriggersTabCtrl = function () {/** @ngInject */function TriggersTabCtrl($scope, $rootScope, uiSegmentSrv, templateSrv) {_classCallCheck(this, TriggersTabCtrl);$scope.editor = this;this.panelCtrl = $scope.ctrl;this.panel = this.panelCtrl.panel;this.templateSrv = templateSrv;this.datasources = this.panelCtrl.datasources; // Load scope defaults
    var scopeDefaults = { getGroupNames: {}, getHostNames: {}, getApplicationNames: {}, oldTarget: _lodash2.default.cloneDeep(this.panel.targets) };_lodash2.default.defaultsDeep(this, scopeDefaults);this.initDatasources();this.panelCtrl.refresh();}_createClass(TriggersTabCtrl, [{ key: 'initDatasources', value: function initDatasources() {var _this = this;return this.panelCtrl.initDatasources().then(function (datasources) {_lodash2.default.each(datasources, function (datasource) {_this.bindSuggestionFunctions(datasource);});});} }, { key: 'bindSuggestionFunctions', value: function bindSuggestionFunctions(datasource) {// Map functions for bs-typeahead
      var ds = datasource.name;this.getGroupNames[ds] = _lodash2.default.bind(this.suggestGroups, this, datasource);this.getHostNames[ds] = _lodash2.default.bind(this.suggestHosts, this, datasource);this.getApplicationNames[ds] = _lodash2.default.bind(this.suggestApps, this, datasource);} }, { key: 'suggestGroups', value: function suggestGroups(datasource, query, callback) {return datasource.zabbix.getAllGroups().then(function (groups) {return _lodash2.default.map(groups, 'name');}).then(callback);} }, { key: 'suggestHosts', value: function suggestHosts(datasource, query, callback) {var groupFilter = datasource.replaceTemplateVars(this.panel.targets[datasource.name].group.filter);return datasource.zabbix.getAllHosts(groupFilter).then(function (hosts) {return _lodash2.default.map(hosts, 'name');}).then(callback);} }, { key: 'suggestApps', value: function suggestApps(datasource, query, callback) {var groupFilter = datasource.replaceTemplateVars(this.panel.targets[datasource.name].group.filter);var hostFilter = datasource.replaceTemplateVars(this.panel.targets[datasource.name].host.filter);return datasource.zabbix.getAllApps(groupFilter, hostFilter).then(function (apps) {return _lodash2.default.map(apps, 'name');}).then(callback);} }, { key: 'datasourcesChanged', value: function datasourcesChanged() {var _this2 = this;_lodash2.default.each(this.panel.datasources, function (ds) {if (!_this2.panel.targets[ds]) {_this2.panel.targets[ds] = _lodash2.default.cloneDeep(_triggers_panel_ctrl.DEFAULT_TARGET);}});this.parseTarget();} }, { key: 'parseTarget', value: function parseTarget() {var _this3 = this;this.initDatasources().then(function () {var newTarget = _lodash2.default.cloneDeep(_this3.panel.targets);if (!_lodash2.default.isEqual(_this3.oldTarget, newTarget)) {_this3.oldTarget = newTarget;}_this3.panelCtrl.refresh();});} }, { key: 'isRegex', value: function isRegex(str) {return utils.isRegex(str);} }, { key: 'isVariable', value: function isVariable(str) {return utils.isTemplateVariable(str, this.templateSrv.variables);} }]);return TriggersTabCtrl;}();function triggerPanelTriggersTab() {return { restrict: 'E',
    scope: true,
    templateUrl: 'public/plugins/alexanderzobnin-zabbix-app/panel-triggers/partials/triggers_tab.html',
    controller: TriggersTabCtrl };

}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRyaWdnZXJzX3RhYi5qcyJdLCJuYW1lcyI6WyJ0cmlnZ2VyUGFuZWxUcmlnZ2Vyc1RhYiIsInV0aWxzIiwiVHJpZ2dlcnNUYWJDdHJsIiwiJHNjb3BlIiwiJHJvb3RTY29wZSIsInVpU2VnbWVudFNydiIsInRlbXBsYXRlU3J2IiwiZWRpdG9yIiwicGFuZWxDdHJsIiwiY3RybCIsInBhbmVsIiwiZGF0YXNvdXJjZXMiLCJzY29wZURlZmF1bHRzIiwiZ2V0R3JvdXBOYW1lcyIsImdldEhvc3ROYW1lcyIsImdldEFwcGxpY2F0aW9uTmFtZXMiLCJvbGRUYXJnZXQiLCJfIiwiY2xvbmVEZWVwIiwidGFyZ2V0cyIsImRlZmF1bHRzRGVlcCIsImluaXREYXRhc291cmNlcyIsInJlZnJlc2giLCJ0aGVuIiwiZWFjaCIsImRhdGFzb3VyY2UiLCJiaW5kU3VnZ2VzdGlvbkZ1bmN0aW9ucyIsImRzIiwibmFtZSIsImJpbmQiLCJzdWdnZXN0R3JvdXBzIiwic3VnZ2VzdEhvc3RzIiwic3VnZ2VzdEFwcHMiLCJxdWVyeSIsImNhbGxiYWNrIiwiemFiYml4IiwiZ2V0QWxsR3JvdXBzIiwibWFwIiwiZ3JvdXBzIiwiZ3JvdXBGaWx0ZXIiLCJyZXBsYWNlVGVtcGxhdGVWYXJzIiwiZ3JvdXAiLCJmaWx0ZXIiLCJnZXRBbGxIb3N0cyIsImhvc3RzIiwiaG9zdEZpbHRlciIsImhvc3QiLCJnZXRBbGxBcHBzIiwiYXBwcyIsIkRFRkFVTFRfVEFSR0VUIiwicGFyc2VUYXJnZXQiLCJuZXdUYXJnZXQiLCJpc0VxdWFsIiwic3RyIiwiaXNSZWdleCIsImlzVGVtcGxhdGVWYXJpYWJsZSIsInZhcmlhYmxlcyIsInJlc3RyaWN0Iiwic2NvcGUiLCJ0ZW1wbGF0ZVVybCIsImNvbnRyb2xsZXIiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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SSxTQUFTeEQsdUJBQVQsR0FBbUMsQ0FDeEMsT0FBTyxFQUNMeUQsVUFBVSxHQURMO0FBRUxDLFdBQU8sSUFGRjtBQUdMQyxpQkFBYSxxRkFIUjtBQUlMQyxnQkFBWTFELGVBSlAsRUFBUDs7QUFNRCIsImZpbGUiOiJ0cmlnZ2Vyc190YWIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0ICogYXMgdXRpbHMgZnJvbSAnLi4vZGF0YXNvdXJjZS16YWJiaXgvdXRpbHMnO1xuaW1wb3J0IHtERUZBVUxUX1RBUkdFVH0gZnJvbSAnLi90cmlnZ2Vyc19wYW5lbF9jdHJsJztcblxuY2xhc3MgVHJpZ2dlcnNUYWJDdHJsIHtcblxuICAvKiogQG5nSW5qZWN0ICovXG4gIGNvbnN0cnVjdG9yKCRzY29wZSwgJHJvb3RTY29wZSwgdWlTZWdtZW50U3J2LCB0ZW1wbGF0ZVNydikge1xuICAgICRzY29wZS5lZGl0b3IgPSB0aGlzO1xuICAgIHRoaXMucGFuZWxDdHJsID0gJHNjb3BlLmN0cmw7XG4gICAgdGhpcy5wYW5lbCA9IHRoaXMucGFuZWxDdHJsLnBhbmVsO1xuICAgIHRoaXMudGVtcGxhdGVTcnYgPSB0ZW1wbGF0ZVNydjtcbiAgICB0aGlzLmRhdGFzb3VyY2VzID0gdGhpcy5wYW5lbEN0cmwuZGF0YXNvdXJjZXM7XG5cbiAgICAvLyBMb2FkIHNjb3BlIGRlZmF1bHRzXG4gICAgdmFyIHNjb3BlRGVmYXVsdHMgPSB7XG4gICAgICBnZXRHcm91cE5hbWVzOiB7fSxcbiAgICAgIGdldEhvc3ROYW1lczoge30sXG4gICAgICBnZXRBcHBsaWNhdGlvbk5hbWVzOiB7fSxcbiAgICAgIG9sZFRhcmdldDogXy5jbG9uZURlZXAodGhpcy5wYW5lbC50YXJnZXRzKVxuICAgIH07XG4gICAgXy5kZWZhdWx0c0RlZXAodGhpcywgc2NvcGVEZWZhdWx0cyk7XG5cbiAgICB0aGlzLmluaXREYXRhc291cmNlcygpO1xuICAgIHRoaXMucGFuZWxDdHJsLnJlZnJlc2goKTtcbiAgfVxuXG4gIGluaXREYXRhc291cmNlcygpIHtcbiAgICByZXR1cm4gdGhpcy5wYW5lbEN0cmwuaW5pdERhdGFzb3VyY2VzKClcbiAgICAudGhlbigoZGF0YXNvdXJjZXMpID0+IHtcbiAgICAgIF8uZWFjaChkYXRhc291cmNlcywgKGRhdGFzb3VyY2UpID0+IHtcbiAgICAgICAgdGhpcy5iaW5kU3VnZ2VzdGlvbkZ1bmN0aW9ucyhkYXRhc291cmNlKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgYmluZFN1Z2dlc3Rpb25GdW5jdGlvbnMoZGF0YXNvdXJjZSkge1xuICAgIC8vIE1hcCBmdW5jdGlvbnMgZm9yIGJzLXR5cGVhaGVhZFxuICAgIGxldCBkcyA9IGRhdGFzb3VyY2UubmFtZTtcbiAgICB0aGlzLmdldEdyb3VwTmFtZXNbZHNdID0gXy5iaW5kKHRoaXMuc3VnZ2VzdEdyb3VwcywgdGhpcywgZGF0YXNvdXJjZSk7XG4gICAgdGhpcy5nZXRIb3N0TmFtZXNbZHNdID0gXy5iaW5kKHRoaXMuc3VnZ2VzdEhvc3RzLCB0aGlzLCBkYXRhc291cmNlKTtcbiAgICB0aGlzLmdldEFwcGxpY2F0aW9uTmFtZXNbZHNdID0gXy5iaW5kKHRoaXMuc3VnZ2VzdEFwcHMsIHRoaXMsIGRhdGFzb3VyY2UpO1xuICB9XG5cbiAgc3VnZ2VzdEdyb3VwcyhkYXRhc291cmNlLCBxdWVyeSwgY2FsbGJhY2spIHtcbiAgICByZXR1cm4gZGF0YXNvdXJjZS56YWJiaXguZ2V0QWxsR3JvdXBzKClcbiAgICAudGhlbihncm91cHMgPT4ge1xuICAgICAgcmV0dXJuIF8ubWFwKGdyb3VwcywgJ25hbWUnKTtcbiAgICB9KVxuICAgIC50aGVuKGNhbGxiYWNrKTtcbiAgfVxuXG4gIHN1Z2dlc3RIb3N0cyhkYXRhc291cmNlLCBxdWVyeSwgY2FsbGJhY2spIHtcbiAgICBsZXQgZ3JvdXBGaWx0ZXIgPSBkYXRhc291cmNlLnJlcGxhY2VUZW1wbGF0ZVZhcnModGhpcy5wYW5lbC50YXJnZXRzW2RhdGFzb3VyY2UubmFtZV0uZ3JvdXAuZmlsdGVyKTtcbiAgICByZXR1cm4gZGF0YXNvdXJjZS56YWJiaXguZ2V0QWxsSG9zdHMoZ3JvdXBGaWx0ZXIpXG4gICAgLnRoZW4oaG9zdHMgPT4ge1xuICAgICAgcmV0dXJuIF8ubWFwKGhvc3RzLCAnbmFtZScpO1xuICAgIH0pXG4gICAgLnRoZW4oY2FsbGJhY2spO1xuICB9XG5cbiAgc3VnZ2VzdEFwcHMoZGF0YXNvdXJjZSwgcXVlcnksIGNhbGxiYWNrKSB7XG4gICAgbGV0IGdyb3VwRmlsdGVyID0gZGF0YXNvdXJjZS5yZXBsYWNlVGVtcGxhdGVWYXJzKHRoaXMucGFuZWwudGFyZ2V0c1tkYXRhc291cmNlLm5hbWVdLmdyb3VwLmZpbHRlcik7XG4gICAgbGV0IGhvc3RGaWx0ZXIgPSBkYXRhc291cmNlLnJlcGxhY2VUZW1wbGF0ZVZhcnModGhpcy5wYW5lbC50YXJnZXRzW2RhdGFzb3VyY2UubmFtZV0uaG9zdC5maWx0ZXIpO1xuICAgIHJldHVybiBkYXRhc291cmNlLnphYmJpeC5nZXRBbGxBcHBzKGdyb3VwRmlsdGVyLCBob3N0RmlsdGVyKVxuICAgIC50aGVuKGFwcHMgPT4ge1xuICAgICAgcmV0dXJuIF8ubWFwKGFwcHMsICduYW1lJyk7XG4gICAgfSlcbiAgICAudGhlbihjYWxsYmFjayk7XG4gIH1cblxuICBkYXRhc291cmNlc0NoYW5nZWQoKSB7XG4gICAgXy5lYWNoKHRoaXMucGFuZWwuZGF0YXNvdXJjZXMsIChkcykgPT4ge1xuICAgICAgaWYgKCF0aGlzLnBhbmVsLnRhcmdldHNbZHNdKSB7XG4gICAgICAgIHRoaXMucGFuZWwudGFyZ2V0c1tkc10gPSBfLmNsb25lRGVlcChERUZBVUxUX1RBUkdFVCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy5wYXJzZVRhcmdldCgpO1xuICB9XG5cbiAgcGFyc2VUYXJnZXQoKSB7XG4gICAgdGhpcy5pbml0RGF0YXNvdXJjZXMoKVxuICAgIC50aGVuKCgpID0+IHtcbiAgICAgIHZhciBuZXdUYXJnZXQgPSBfLmNsb25lRGVlcCh0aGlzLnBhbmVsLnRhcmdldHMpO1xuICAgICAgaWYgKCFfLmlzRXF1YWwodGhpcy5vbGRUYXJnZXQsIG5ld1RhcmdldCkpIHtcbiAgICAgICAgdGhpcy5vbGRUYXJnZXQgPSBuZXdUYXJnZXQ7XG4gICAgICB9XG4gICAgICB0aGlzLnBhbmVsQ3RybC5yZWZyZXNoKCk7XG4gICAgfSk7XG4gIH1cblxuICBpc1JlZ2V4KHN0cikge1xuICAgIHJldHVybiB1dGlscy5pc1JlZ2V4KHN0cik7XG4gIH1cblxuICBpc1ZhcmlhYmxlKHN0cikge1xuICAgIHJldHVybiB1dGlscy5pc1RlbXBsYXRlVmFyaWFibGUoc3RyLCB0aGlzLnRlbXBsYXRlU3J2LnZhcmlhYmxlcyk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRyaWdnZXJQYW5lbFRyaWdnZXJzVGFiKCkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnRScsXG4gICAgc2NvcGU6IHRydWUsXG4gICAgdGVtcGxhdGVVcmw6ICdwdWJsaWMvcGx1Z2lucy9hbGV4YW5kZXJ6b2JuaW4temFiYml4LWFwcC9wYW5lbC10cmlnZ2Vycy9wYXJ0aWFscy90cmlnZ2Vyc190YWIuaHRtbCcsXG4gICAgY29udHJvbGxlcjogVHJpZ2dlcnNUYWJDdHJsLFxuICB9O1xufVxuIl19